<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Branch Dashboard - SGGCPL</title>
  <style>
    body {
      font-family: "Bell MT", serif;
      background-color: #f7f9fc;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background-color: #002b80;
      color: white;
      padding: 20px;
    }
    h1, h2 {
      margin: 0;
    }
    table {
      border-collapse: collapse;
      width: 90%;
      margin: 20px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    th, td {
      text-align: left;
      padding: 14px;
      border-bottom: 1px solid #e6e6e6;
    }
    th {
      background-color: #004aad;
      color: white;
      font-size: 16px;
    }
    tr:hover { background-color: #f1f5ff; }
    a button {
      background-color: #004aad;
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
    }
    a button:hover { background-color: #002b80; }
    .logout {
      background-color: #ff4d4d;
      padding: 10px 20px;
      margin-top: 20px;
    }
    .logout:hover { background-color: #cc0000; }
  </style>
</head>
<body>

  <header>
    <h1>Sree Gowri Ganesha Chits Private Limited</h1>
    <h2>Branch Dashboard</h2>
    <p id="branchName">Welcome, Branch!</p>
  </header>

  <table>
    <tr>
      <th>Report Name</th>
      <th>Description</th>
      <th>Open Report</th>
    </tr>
    <tr>
      <td>Weekly Commitment Report</td>
      <td>Track weekly targets for your branch.</td>
      <td><a href="#" id="weeklyReport" target="_blank"><button>Open Report</button></a></td>
    </tr>
    <tr>
      <td>Monthly Commitment Report</td>
      <td>Track monthly targets for your branch.</td>
      <td><a href="#" id="monthlyReport" target="_blank"><button>Open Report</button></a></td>
    </tr>
    <tr>
      <td>Annual Balance Sheet</td>
      <td>Financial summary for the year.</td>
      <td><a href="#" id="annualReport" target="_blank"><button>Open Report</button></a></td>
    </tr>
  </table>

  <button class="logout" onclick="logout()">Logout</button>

  <script>
    // ===== BRANCH DASHBOARD SCRIPT =====

    // Branch credentials and their specific Google Sheet links
    const branches = {
      "anekal": {
        email: "sggcpl.ank@gmail.com",
        password: "password1",
        reports: {
          weekly: "https://link-to-anekal-weekly-sheet",
          monthly: "https://link-to-anekal-monthly-sheet",
          annual: "https://link-to-anekal-annual-sheet"
        }
      },
      "centralize": {
        email: "sggcpl.cb@gmail.com",
        password: "password2",
        reports: {
          weekly: "https://link-to-centralize-weekly-sheet",
          monthly: "https://link-to-centralize-monthly-sheet",
          annual: "https://link-to-centralize-annual-sheet"
        }
      },
      "chanrayapatna": {
        email: "sggcpl.crp1@gmail.com",
        password: "password3",
        reports: {
          weekly: "https://link-to-chanrayapatna-weekly-sheet",
          monthly: "https://link-to-chanrayapatna-monthly-sheet",
          annual: "https://link-to-chanrayapatna-annual-sheet"
        }
      },
      "davanagere": {
        email: "sggcpl.dav@gmail.com",
        password: "password4",
        reports: {
          weekly: "https://link-to-davanagere-weekly-sheet",
          monthly: "https://link-to-davanagere-monthly-sheet",
          annual: "https://link-to-davanagere-annual-sheet"
        }
      },
      "harihara": {
        email: "sggcpl.hrr@gmail.com",
        password: "password5",
        reports: {
          weekly: "https://link-to-harihara-weekly-sheet",
          monthly: "https://link-to-harihara-monthly-sheet",
          annual: "https://link-to-harihara-annual-sheet"
        }
      },
      "hassan": {
        email: "sggcpl.hassan@gmail.com",
        password: "password6",
        reports: {
          weekly: "https://link-to-hassan-weekly-sheet",
          monthly: "https://link-to-hassan-monthly-sheet",
          annual: "https://link-to-hassan-annual-sheet"
        }
      },
      "mysore": {
        email: "sggcpl.mys@gmail.com",
        password: "password7",
        reports: {
          weekly: "https://link-to-mysore-weekly-sheet",
          monthly: "https://link-to-mysore-monthly-sheet",
          annual: "https://link-to-mysore-annual-sheet"
        }
      },
      "vijayanagar": {
        email: "sggcpl.vijayanagar@gmail.com",
        password: "password8",
        reports: {
          weekly: "https://link-to-vijayanagar-weekly-sheet",
          monthly: "https://link-to-vijayanagar-monthly-sheet",
          annual: "https://link-to-vijayanagar-annual-sheet"
        }
      },
      "gulbarga": {
        email: "sggcpl.glb1@gmail.com",
        password: "password9",
        reports: {
          weekly: "https://link-to-gulbarga-weekly-sheet",
          monthly: "https://link-to-gulbarga-monthly-sheet",
          annual: "https://link-to-gulbarga-annual-sheet"
        }
      },
      "salem": {
        email: "salem@sggctn.com",
        password: "password10",
        reports: {
          weekly: "https://link-to-salem-weekly-sheet",
          monthly: "https://link-to-salem-monthly-sheet",
          annual: "https://link-to-salem-annual-sheet"
        }
      },
      "krishnagiri": {
        email: "krishnagiri@sggctn.com",
        password: "password11",
        reports: {
          weekly: "https://link-to-krishnagiri-weekly-sheet",
          monthly: "https://link-to-krishnagiri-monthly-sheet",
          annual: "https://link-to-krishnagiri-annual-sheet"
        }
      },
      "hosur": {
        email: "hosur@sggctn.com",
        password: "password12",
        reports: {
          weekly: "https://link-to-hosur-weekly-sheet",
          monthly: "https://link-to-hosur-monthly-sheet",
          annual: "https://link-to-hosur-annual-sheet"
        }
      }
    };

    // 1️⃣ Get logged branch from sessionStorage
    const branchKey = sessionStorage.getItem("loggedBranch");

    // 2️⃣ If no branch logged in, redirect to index.html for login
    if (!branchKey) {
      alert("No branch logged in! Redirecting to login page.");
      window.location.href = "index.html";
    } else {
      const branchData = branches[branchKey.toLowerCase()];
      if (!branchData) {
        alert("Branch not found! Redirecting to login page.");
        sessionStorage.removeItem("loggedBranch");
        window.location.href = "index.html";
      } else {
        // Display branch name
        document.getElementById("branchName").textContent =
          "Welcome, " + branchKey.charAt(0).toUpperCase() + branchKey.slice(1) + " Branch!";
        // Set report links
        document.getElementById("weeklyReport").href = branchData.reports.weekly;
        document.getElementById("monthlyReport").href = branchData.reports.monthly;
        document.getElementById("annualReport").href = branchData.reports.annual;
      }
    }

    // 3️⃣ Logout function
    function logout() {
      sessionStorage.removeItem("loggedBranch");
      window.location.href = "index.html";
    }
  </script>

</body>
</html>
